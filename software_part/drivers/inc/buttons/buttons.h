/**
 * @file    buttons.h
 * @author  Olexandr Makedonskyi
 * @brief   Внутрішній заголовок драйвера кнопок
 * @date    13.01.2026
 * @version 1.0
 * 
 * Цей файл містить внутрішні функції та константи для роботи
 * з кнопками через резистивну драбину та ADC.
 * 
 * @note Цей файл НЕ повинен включатись напряму в інші модулі!
 *       Використовуйте buttons_handle.h замість цього.
 */

#ifndef __BUTTONS_H
#define __BUTTONS_H

//==================== INCLUDES ========================
#include "stm8s.h"
#include "buttons_handle.h"

//================== FUNCTIONS PROTOTYPES ==================


/**
 * @brief Ініціалізація підсистеми кнопок
 * 
 * Виконує ініціалізацію ADC для зчитування стану кнопок.
 * Налаштовує канал ADC3 для роботи з резистивною драбиною.
 * 
 * @note Має викликатись один раз при старті системи
 * 
 * @see button_read()
 */
void initialize_buttons(void);

/**
 * @brief Декодування аналогового значення в ідентифікатор кнопки
 * 
 * Конвертує значення ADC з резистивної драбини в enum ButtonID
 * на основі порогових значень.
 * 
 * Порогові діапазони (10-bit ADC, 0-1023):
 * - BTN_MODE: >920
 * - BTN_DOWN: 580-870
 * - BTN_UP:   100-580
 * - BTN_NONE: інші значення
 * 
 * @param[in] adc_value Значення ADC (0-1023)
 * 
 * @return Ідентифікатор кнопки
 * @retval BTN_NONE Жодна кнопка не розпізнана
 * @retval BTN_MODE Розпізнана кнопка MODE
 * @retval BTN_UP   Розпізнана кнопка UP
 * @retval BTN_DOWN Розпізнана кнопка DOWN
 * 
 * @note Порогові значення підібрані експериментально для
 *       конкретної резистивної драбини
 * 
 */
ButtonID button_decode(uint16_t adc_value);


#endif