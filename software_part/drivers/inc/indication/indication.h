
/**
 * @file    indication.h
 * @author  Olexandr Makedonskyi
 * @brief   Внутрішній заголовок драйвера LED-індикації
 * @date    13.01.2026
 * @version 1.0
 * 
 * Цей файл містить внутрішні функції для керування LED-індикацією
 * через зсувовий регістр 74HC595. Забезпечує абстракцію над
 * низькорівневим драйвером shift_register.
 * 
 * Апаратна конфігурація:
 * - Мікросхема: 74HC595 (8-бітний зсувовий регістр)
 * - Порти: PC5 (DS), PC6 (SH_CP), PC7 (ST_CP)
 * - Виходи Q0-Q7: підключені до LED через струмообмежуючі резистори
 * 
 * @note Цей файл НЕ повинен включатись напряму в інші модулі!
 *       Використовуйте led_indication.h замість цього.
 */

#ifndef __INDICATION_H
#define __INDICATION_H

//==================== INCLUDES ========================

#include "stm8s.h"
#include "led_indication.h"


//================== FUNCTIONS PROTOTYPES ==================

/**
 * @brief Ініціалізація підсистеми індикації
 * 
 * Виконує ініціалізацію зсувового регістру та встановлює
 * початковий стан всіх виходів в LOW (LED вимкнуті).
 * 
 * Послідовність ініціалізації:
 * 1. Ініціалізація GPIO для роботи з 74HC595
 * 2. Відправка 0x00 для скидання всіх виходів
 * 
 * @note Викликається з led_indication_init()
 * 
 * @see led_indication_init()
 */
void indication_initialize(void);

/**
 * @brief Встановлення стану LED-індикації
 * 
 * Відправляє байт даних до зсувового регістру для керування
 * станом всіх 8 виходів (Q0-Q7).
 * 
 * Можливі значення:
 * - 0x00 (LED_ALL_OFF): всі LED вимкнуті
 * - 0xFF (LED_ALL_ON): всі LED увімкнуті
 * - Інші значення: індивідуальне керування кожним LED
 * 
 * @param[in] state Байт стану (кожен біт відповідає одному LED)
 *                  - Біт 0 → Q0 (LED0)
 *                  - Біт 1 → Q1 (LED1)
 *                  - ...
 *                  - Біт 7 → Q7 (LED7)
 * 
 * @note Функція виконується синхронно (~100 мкс при 16 МГц)
 * 
 * @see LED_ALL_ON
 * @see LED_ALL_OFF
 */
void indication_set_state(uint8_t state);

#endif /* __INDICATION_H */