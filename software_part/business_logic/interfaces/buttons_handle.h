/**
  * @file    buttons_handle.h
  * @author  Olexandr Makedonskyi
  * @brief   Інтерфейс кнопки для бізнес-логіки.
  * @date    13.01.2026
  * @version 1.0
  * Модуль забезпечує абстракцію для читання стану кнопок через ADC.
  * Система використовує резистивну драбину для розпізнавання
  * декількох кнопок на одному аналоговому вході.
  * 
  * @note Підтримувані кнопки: MODE, UP, DOWN
  *
  */


#ifndef __BUTTONS_HANDLE_H
#define __BUTTONS_HANDLE_H

/**
 * @brief Ідентифікатори кнопок
 * 
 * Enum для ідентифікації натиснутої кнопки або відсутності натискання.
 */


//==================== TYPEDEFS ========================

typedef enum {
    BTN_NONE = 0,   /**< Жодна кнопка не натиснута */
    BTN_MODE,       /**< Кнопка вибору режиму (Mode); Також використовується для виходу з режиму вимірювання */
    BTN_UP,         /**< Кнопка збільшення порогового значення (threshold) на 10; Вхід в режим зміни порогового значення */
    BTN_DOWN        /**< Кнопка зменшення порогового значення (threshold) на 10; Вхід в режим зміни порогового значення */
} ButtonID;


//================== FUNCTIONS PROTOTYPES ==================

/**
 * @brief Зчитати стан кнопок з дебаунсом
 * 
 * Виконує зчитування стану кнопок через ADC, декодування
 * аналогового значення в ідентифікатор кнопки та програмний
 * дебаунс для усунення помилкових спрацювань.
 * 
 * @return Ідентифікатор натиснутої кнопки
 * @retval BTN_NONE Жодна кнопка не натиснута
 * @retval BTN_MODE Натиснута кнопка MODE
 * @retval BTN_UP   Натиснута кнопка UP
 * @retval BTN_DOWN Натиснута кнопка DOWN
 * 
 * @note Функція виконує блокуюче зчитування ADC з дебаунсом.
 *       Час виконання: ~100 мкс (без змін) або ~20 мс (при зміні стану)
 * 
 * @warning ADC має бути попередньо ініціалізований
 * 
 * @see ButtonID
 * @see button_read()
 * @see debounce_button()
 */
ButtonID get_button_value(void);


#endif /* __BUTTONS_HANDLE_H */