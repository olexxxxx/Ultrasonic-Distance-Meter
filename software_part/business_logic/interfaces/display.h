/**
 * @file    display.h
 * @author  Olexandr Makedonskyi
 * @brief   Публічний інтерфейс семисегментного дисплея для бізнес-логіки
 * @date    13.01.2026
 * @version 1.0
 * 
 * 
 * Модуль забезпечує високорівневий інтерфейс для роботи з
 * 4-розрядним 7-сегментним дисплеє (дисплей загальним катодом).
 * Підтримує відображення чисел, тексту та спеціальних символів.
 * 
 * Можливості дисплея:
 * - 4 розряди (digits)
 * - 7-сегментна індикація + десяткова крапка
 * - 8 рівнів яскравості (0-7)
 * 
 * 
 * @note Цей файл призначений для використання в бізнес-логіці
 */

#ifndef __DISPLAY_H
#define __DISPLAY_H

//==================== INCLUDES ========================
#include "stm8s.h"

//==================== DEFINES =========================

/**
 * @brief Мінімальний рівень яскравості
 * 
 * Найтемніший режим, але дисплей залишається видимим.
 */
#define DISPLAY_BRIGHTNESS_MIN      0

/**
 * @brief Максимальний рівень яскравості
 * 
 * Найяскравіший режим для використання при денному світлі.
 */
#define DISPLAY_BRIGHTNESS_MAX      7

/**
 * @brief Рівень яскравості за замовчуванням
 * 
 * Оптимальний рівень для використання в приміщенні.
 */
#define DISPLAY_BRIGHTNESS_DEFAULT  5

//================== FUNCTION PROTOTYPES ==================

/**
 * @brief Ініціалізація підсистеми дисплея
 * 
 * 
 * @note Має викликатись один раз при старті системи
 *       перед першим використанням display_show_*()
 * 
 * @see display_show_number()
 * @see display_set_brightness()
 */
void initialize_display(void);

/**
 * @brief Відображення текстового рядка на дисплеї
 * 
 * 
 * Підтримувані символи:
 * - Цифри: '0'-'9'
 * - Літери: A, b, C, E, F, H, L, P, r, U (верхній/нижній регістр)
 * - Спеціальні: ' ' (пробіл), '-' (дефіс), '_' (підкреслення)
 * 
 * @param[in] text Вказівник на null-terminated рядок для відображення
 *                 Максимальна довжина: 32 символи (обмеження обробки)
 * 
 * @warning Вказівник text не може бути NULL
 * @warning Рядок має бути null-terminated
 * 
 * @see display_show_number()
 * @see display_clear()
 */
void display_show_text(const char *text);

/**
 * @brief Відображення числа на дисплеї
 * 
 * Конвертує беззнакове ціле число у десятковий формат
 * та відображає на дисплеї з правим вирівнюванням.
 * 
 * @param[in] number Число для відображення
 * 
 * 
 * @see display_show_text()
 * @see display_show_threshold()
 */
void display_show_number(uint16_t number);

/**
 * @brief Відображення значення порогу спрацювання
 * 
 * Спеціалізована функція для відображення порогу відстані
 * в режимі налаштування. 
 * 
 * 
 * @param[in] threshold Значення порогу в сантиметрах (0-400)
 *                      0 = індикація вимкнена
 * 
 * @see display_show_number()
 */
void display_show_threshold(uint16_t threshold);


/**
 * @brief Очищення дисплея
 * 
 * Вимикає всі сегменти дисплея.
 * 
 * @note Яскравість залишається незмінною
 * @see display_show_text()
 */
void display_clear(void);

#endif /* __DISPLAY_H */