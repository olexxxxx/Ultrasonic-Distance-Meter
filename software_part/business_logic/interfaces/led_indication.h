/**
 * @file    led_indication.h
 * @author  Olexandr Makedonskyi
 * @brief   Публічний інтерфейс LED-індикації для бізнес-логіки
 * @date    13.01.2026
 * @version 1.0
 * 
 * Модуль забезпечує високорівневий інтерфейс для керування
 * світлодіодною індикацією на основі виміряної відстані.
 * 
 * Логіка роботи:
 * - Якщо об'єкт ближче порогового значення → LED увімкнуто (0xFF)
 * - Якщо об'єкт далі порогового значення → LED вимкнуто (0x00)
 * - Підтримка одиниць виміру: см (units=1) або дюйми (units=0)
 * 
 * @note Цей файл призначений для використання в бізнес-логіці
 */


#ifndef __LED_INDICATION_H
#define __LED_INDICATION_H

#define LED_ALL_ON   0xFF
#define LED_ALL_OFF  0x00

//==================== INCLUDES ========================

#include "stm8s.h"

//==================== DEFINES =========================

/**
 * @brief Значення для увімкнення всіх LED
 * 
 * Всі виходи зсувового регістру встановлюються в HIGH (0xFF).
 */
#define LED_ALL_ON      0xFF

/**
 * @brief Значення для вимкнення всіх LED
 * 
 * Всі виходи зсувового регістру встановлюються в LOW (0x00).
 */
#define LED_ALL_OFF     0x00

/**
 * @brief Код одиниць виміру: сантиметри
 */
#define UNITS_CM        1

/**
 * @brief Код одиниць виміру: дюйми
 */
#define UNITS_INCH      0

//================== FUNCTIONS PROTOTYPES ==================

/**
 * @brief Ініціалізація підсистеми LED-індикації
 * 
 * Виконує ініціалізацію зсувового регістру та встановлює
 * початковий стан (всі LED вимкнуті).
 * 
 * @note Має викликатись один раз при старті системи
 *       перед першим використанням led_indication_update()
 * 
 * @see led_indication_update()
 */
void led_indication_init(void);

/**
 * @brief Оновлення стану LED на основі виміряної відстані
 * 
 * Функція порівнює виміряну відстань з пороговим значенням
 * та керує станом світлодіодної індикації.
 * 
 * @param[in] distance  Виміряна відстань в ОБРАНИХ одиницях (см або дюйми)
 * @param[in] threshold Порогове значення в ТИХ ЖЕ одиницях
 * 
 * @note Обидва параметри мають бути в ОДНАКОВИХ одиницях виміру!
 *       Конвертація виконується на рівні business_logic перед викликом.
 * 
 * @see led_indication_init()
 * @see LED_ALL_ON
 * @see LED_ALL_OFF
 * 
 */
void led_indication_update(uint16_t distance, uint16_t threshold);

#endif /* __LED_INDICATION_H */
